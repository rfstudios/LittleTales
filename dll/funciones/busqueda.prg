/*  Este archivo contiene la función de búsqueda  de parámetros de configuración    Búsquedas:	 0 - Configuración	 1 - Teclas	 2 - Menús	 3 - Personajes	 4 - Mapas	 5 - GameObjects	 6 - Eventos	 7 - Textos	 8 - Eventos*	 9 - Eventos**	10 - Inventario	11 - Datos de partida	12 - Sistema	13 - Enemigos		* Se emplea para recoger la siguiente página del evento indicado	** Se emplea para recoger la id del evento cuya siguiente página indicamos*/function string buscar(string cadena, int tipo)	begin		switch(tipo)			case 0:				SQLITE3_OPENTABLE(db,"SELECT valor FROM config WHERE palabraclave='" + cadena + "'",sqlRes);				if (sqlRes.rows <= 0)					log("No se encuentra "+cadena+" en una busqueda de tipo "+tipo);				else					return SQLITE3_GETFIELDVALUE(sqlRes,0);				end			end			case 1:				SQLITE3_OPENTABLE(db,"SELECT valor FROM keys WHERE nombre='" + cadena + "'",sqlRes);				if (sqlRes.rows <= 0)					log("No se encuentra "+cadena+" en una busqueda de tipo "+tipo);				else					return SQLITE3_GETFIELDVALUE(sqlRes,0);				end					end			case 2:				SQLITE3_OPENTABLE(db,"SELECT "+lang+", coord_x, coord_y FROM menu WHERE id=" + cadena + " and menuid="+father.menutype,sqlRes);				if (sqlRes.rows <= 0)					log("No se encuentra "+cadena+" en una busqueda de tipo "+tipo);				else					father.x=SQLITE3_GETFIELDVALUE(sqlRes,1);					father.y=SQLITE3_GETFIELDVALUE(sqlRes,2);					return SQLITE3_GETFIELDVALUE(sqlRes,0);				end					end			case 3:				if(cadena!="contar")					SQLITE3_OPENTABLE(db,"SELECT "+cadena+" FROM characters WHERE id=" + father.id_obj,sqlRes);				else					SQLITE3_OPENTABLE(db,"SELECT count(id) FROM characters",sqlRes);				end								if (sqlRes.rows <= 0)					log("No se encuentra "+cadena+" en una busqueda de tipo "+tipo);				else					return SQLITE3_GETFIELDVALUE(sqlRes,0);				end			end			case 4:				SQLITE3_OPENTABLE(db,"SELECT "+cadena+" FROM maps WHERE id="+mapid,sqlRes);				if (sqlRes.rows <= 0)					log("No se encuentra "+cadena+" en una busqueda de tipo "+tipo);				else					return SQLITE3_GETFIELDVALUE(sqlRes,0);				end			end			case 5:				if(cadena!="contar")					SQLITE3_OPENTABLE(db,"SELECT "+cadena+" FROM gameobjects WHERE id="+father.id_obj+" and id_map="+mapid,sqlRes);				else					SQLITE3_OPENTABLE(db,"SELECT count(id) FROM gameobjects WHERE id_map="+mapid,sqlRes);				end								if (sqlRes.rows <= 0)					log("No se encuentra "+cadena+" en una busqueda de tipo "+tipo);					return 0;				else					return SQLITE3_GETFIELDVALUE(sqlRes,0);				end			end			case 6:				switch(cadena)					case "contar":						SQLITE3_OPENTABLE(db,"SELECT count(id) FROM event_content WHERE event_id="+father.id_obj,sqlRes);					end					case "tipo":						SQLITE3_OPENTABLE(db,"SELECT tipo FROM events WHERE id=(SELECT event_id FROM gameobjects WHERE id="+father.id_obj+" and id_map="+mapid+")",sqlRes);					end					default:						SQLITE3_OPENTABLE(db,"SELECT "+cadena+" FROM event_content WHERE event_id="+father.id_obj+" and id="+father.file,sqlRes);					end				end								if (sqlRes.rows <= 0)					log("No se encuentra "+cadena+" en una busqueda de tipo "+tipo);					return 0;				else					return SQLITE3_GETFIELDVALUE(sqlRes,0);				end			end			case 7:				SQLITE3_OPENTABLE(db,"SELECT "+lang+" FROM textos WHERE id=" + cadena,sqlRes);				if (sqlRes.rows <= 0)					log("No se encuentra "+cadena+" en una busqueda de tipo "+tipo);				else					return SQLITE3_GETFIELDVALUE(sqlRes,0);				end			end			case 8:				SQLITE3_OPENTABLE(db,"SELECT prox_event FROM events WHERE id="+cadena,sqlRes);				if (sqlRes.rows <= 0)					log("No se encuentra "+cadena+" en una busqueda de tipo "+tipo);					return 0;				else					return SQLITE3_GETFIELDVALUE(sqlRes,0);				end			end			case 9:				SQLITE3_OPENTABLE(db,"SELECT id FROM events WHERE prox_event="+cadena,sqlRes);				if (sqlRes.rows <= 0)					log("No se encuentra "+cadena+" en una busqueda de tipo "+tipo);					return 0;				else					return SQLITE3_GETFIELDVALUE(sqlRes,0);				end			end			case 10:				SQLITE3_OPENTABLE(db,"SELECT cantidad FROM inventario WHERE id_obj="+cadena,sqlRes);				if (sqlRes.rows <= 0)					log("No se encuentra "+cadena+" en una busqueda de tipo "+tipo);					return -1;				else					return SQLITE3_GETFIELDVALUE(sqlRes,0);				end			end			case 11:				SQLITE3_OPENTABLE(db,"SELECT valor FROM datos_partida WHERE nombre='" + cadena + "'",sqlRes);				if (sqlRes.rows <= 0)					log("No se encuentra "+cadena+" en una busqueda de tipo "+tipo);					return -1;				else					return SQLITE3_GETFIELDVALUE(sqlRes,0);				end			end			case 12:				SQLITE3_OPENTABLE(db,"SELECT "+lang+" FROM sistema WHERE concepto='" + cadena + "'",sqlRes);				if (sqlRes.rows <= 0)					log("No se encuentra "+cadena+" en una busqueda de tipo "+tipo);					return -1;				else					return SQLITE3_GETFIELDVALUE(sqlRes,0);				end			end			case 13:				SQLITE3_OPENTABLE(db,"SELECT "+cadena+" FROM enemies WHERE id="+father.id_obj,sqlRes);				if (sqlRes.rows <= 0)					log("No se encuentra "+cadena+" en una busqueda de tipo "+tipo);				else					return SQLITE3_GETFIELDVALUE(sqlRes,0);				end			end		end	end 